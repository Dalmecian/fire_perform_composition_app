# 火の演技練習サポートアプリ 開発計画書

## 1. プロジェクト概要

### プロジェクト名
火の演技練習サポートアプリ (Fire Performance Practice Support App)

### プロジェクトの目的
火を使った集団演技（ファイヤーパフォーマンス）の練習を効率化し、演技者が正確なタイミングで演技を実行できるよう支援するWebアプリケーションを開発する。

### ターゲットユーザー
- 火の演技団体・グループ
- ファイヤーパフォーマンス演技者
- 演技指導者・振付師

### 主要な価値提案
- 楽曲に同期した演技タイムラインの可視化
- 音声による次の動作の事前告知（3秒前）
- CSVによる演技データの管理・共有
- 直感的な操作で練習効率を向上
- 演技隊形の可視化
- 演技者別のタイムライン表示と管理

## 2. 現在の開発状況

### バージョン: v0.0.0 (開発フェーズ)

### 完成済み機能
✅ **タイムライン表示**
- 時間ベースでの演技シーケンス表示
- 現在の演技と次の演技の同時表示
- クリックによる任意のタイミングへのジャンプ

✅ **再生制御**
- 再生/一時停止機能
- 前/次の演技への移動
- タイマーリセット機能

✅ **音声読み上げ**
- 次の動作の3秒前自動告知
- 日本語音声合成による読み上げ

✅ **CSVデータ管理**
- 演技データのCSVエクスポート
- CSVファイルからのデータインポート
- データ形式の検証機能

## 3. 技術仕様

### フロントエンド技術スタック
- **React 18.2.0**: UIフレームワーク
- **Vite 4.4.5**: ビルドツール・開発サーバー
- **Tailwind CSS 3.3.3**: CSSフレームワーク
- **Lucide React 0.263.1**: アイコンライブラリ

### 開発ツール
- **ESLint**: コード品質管理
- **PostCSS**: CSS処理
- **Autoprefixer**: CSS互換性

### ブラウザAPI使用
- **Web Speech API**: 音声読み上げ機能
- **File API**: CSVファイルの読み込み
- **Blob API**: CSVファイルのダウンロード

## 4. データ構造

### 演技データ形式
```javascript
{
  time: string,           // 表示時間 (例: "1:30")
  timeSeconds: number,    // 秒数 (例: 90)
  lyrics: string,         // 楽曲の歌詞・セクション
  formation: string,      // 隊形情報
  action: string,         // 動作名
  actionDetail: string    // 動作の詳細説明
}
```

### CSVフォーマット
```csv
"時間","時間（秒）","歌詞","隊形","動き","動き詳細"
"0:00","0","尺八独奏","①","中央側にトーチをおいてしゃがみ待機","中央側にトーチをおいてしゃがみ待機"
```

## 5. 開発ロードマップ

### Phase 1: 基本機能 ✅ (完了)
- [x] タイムライン表示システム
- [x] 再生制御機能
- [x] 音声読み上げ機能
- [x] CSVインポート/エクスポート機能

### Phase 2: 機能拡張 (予定)
- [ ] 楽曲ファイル再生機能
  - 音楽ファイル（MP3/WAV）のアップロード
  - タイムラインと音楽の同期再生
  - 音量調整機能

- [ ] TypeScript化
  - TypeScriptへの移行
  - 型安全なデータ管理

- [ ] 演技データ編集機能
  - アプリ内での演技データの追加・編集・削除
  - ドラッグ&ドロップによる時間調整
  - 演技の複製・分割機能

- [ ] 表示カスタマイズ機能
  - フォントサイズ調整
  - カラーテーマ変更
  - 表示項目の選択

### Phase 3: 高度機能 (将来展望)
- [ ] マルチユーザー機能
  - 役割別の演技データ表示
  - ポジション別のタイムライン
  - 演技隊形の可視化

- [ ] 機能別ページ
  - 演技者別のタイムラインページ
  - 演技隊形全体タイムラインページ

### Phase 4: パフォーマンス最適化
- [ ] パフォーマンス改善
  - 大量データの効率的処理
  - メモリ使用量の最適化
  - 読み込み速度の改善

- [ ] アクセシビリティ向上
  - キーボードナビゲーション対応
  - スクリーンリーダー対応
  - 色覚異常対応

## 6. 品質保証計画

### テスト戦略
- [ ] ユニットテストの導入（Jest + React Testing Library）
- [ ] E2Eテストの実装（Playwright）
- [ ] ブラウザ互換性テスト

### コード品質
- [ ] TypeScriptへの移行
- [ ] より厳密なESLintルールの適用
- [ ] Prettierによるコード整形の統一

### パフォーマンス監視
- [ ] Web Vitalsの測定・改善
- [ ] バンドルサイズの最適化
- [ ] レスポンシブデザインの検証

## 7. デプロイメント戦略

### 開発環境
- **ローカル開発**: Vite開発サーバー (localhost:3000)
- **ホットリロード**: 開発時の自動更新機能

### 本番環境（予定）
- **静的サイトホスティング**: Vercel / Netlify / GitHub Pages
- **CDN**: 静的アセットの高速配信
- **HTTPS**: セキュアな通信の確保

## 8. リスク管理

### 技術的リスク
- **ブラウザ互換性**: Web Speech APIの対応状況
- **パフォーマンス**: 大量データ処理時の応答性
- **セキュリティ**: CSVファイル処理時の入力検証

### 対策
- **プログレッシブ・エンハンスメント**: 基本機能は全ブラウザで動作
- **エラーハンドリング**: 適切なエラーメッセージの表示
- **入力検証**: CSVデータの形式チェック強化

## 9. 成功指標

### 機能面
- [ ] 全主要ブラウザでの動作確認
- [ ] CSVデータの正確な読み込み・出力
- [ ] 音声読み上げの3秒前タイミング精度

### ユーザビリティ
- [ ] 初回利用者でも10分以内に基本操作を習得
- [ ] 演技データの読み込み時間5秒以内
- [ ] モバイルデバイスでの操作性確保

### パフォーマンス
- [ ] 初回ページロード時間3秒以内
- [ ] 300件以上の演技データでも遅延なく動作
- [ ] メモリ使用量100MB以下

## 10. メンテナンス計画

### 定期的なアップデート
- 依存関係のセキュリティアップデート
- ブラウザ仕様変更への対応
- ユーザーフィードバックに基づく改善

### ドキュメンテーション
- ユーザーマニュアルの作成
- 開発者向けドキュメントの整備
- APIドキュメントの充実

---

**最終更新**: 2025年8月14日  
**作成者**: Dalmecian
**プロジェクト開始日**: 2025年8月14日